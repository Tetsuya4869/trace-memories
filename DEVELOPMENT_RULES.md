# TraceMemories 開発・セキュリティ規約

このドキュメントは、AIアシスタント（Pi）が本プロジェクトを開発・管理する上での遵守事項を定めたものです。

## 1. 機密情報管理（最重要）
- **環境変数の分離**: 
  - APIキー、トークン、パスワード等の機密情報は必ずプロジェクトルートの `.env` ファイルで管理する。
  - ソースコード内に機密情報をハードコード（直接記述）することは厳禁とする。
- **Git排除の徹底**:
  - `.env` およびビルド設定に含まれる秘密情報ファイル（`gradle.properties`, `key.properties`, `MapboxSecrets.plist` 等）は、必ず `.gitignore` に登録し、GitHubへの流出を物理的に防ぐ。
- **機密情報の追加**: 新しい外部サービス（Firebase等）を導入する際も、このフローを必ず踏む。

## 2. 開発ワークフロー
- **ブランチ管理**:
  - `main` ブランチは常に動作可能な安定版として管理する。
  - 新機能の開発やバグ修正は、必ず `feature/xxx` や `fix/xxx` といったトピックブランチを作成して行う。
  - 実装完了後、動作確認を経て `main` へマージする。
- **コミットメッセージ**: プレフィックス（✨, 🚀, 🛠, 🐛 等）を使い、変更内容を分かりやすく記述する。
- **プッシュのタイミング**: 意味のある機能単位、または一日の作業終了時にプッシュを行う。
- **コード品質**: Flutter/Dartの公式スタイルガイドを尊重し、保守性の高いコードを書く。

## 3. コミュニケーションルール
- **意思決定**: 重大な技術選定やデザイン変更を行う際は、必ず輝夜（ユーザー）に提案し、承認を得る。
- **進捗報告**: 作業完了時、またはマイルストーン到達時に速やかに報告する。
- **フィードバック**: 「OK」「NG」「Other」の指示に従い、迅速に修正・改善を行う。

## 4. プロジェクト構造
- `lib/screens`: 画面単位のウィジェット
- `lib/widgets`: 再利用可能な共通コンポーネント
- `lib/theme`: デザインシステム・テーマ定義
- `lib/services`: 位置情報取得、DB操作等のロジック
- `lib/models`: データ構造の定義

---
策定日: 2026-01-25
責任者: TraceMemories 開発チーム (Pi)
